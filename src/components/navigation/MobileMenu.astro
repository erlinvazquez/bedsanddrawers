---
import type { Category } from '../../data/categories';

interface Props {
  categories: Category[];
}

const { categories } = Astro.props;
---

<div class="sm:hidden">
  <button
    type="button"
    class="mobile-menu-button inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100"
    aria-controls="mobile-menu"
    aria-expanded="false"
  >
    <span class="sr-only">Open main menu</span>
    <svg
      class="block h-6 w-6"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      aria-hidden="true"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M4 6h16M4 12h16M4 18h16"
      />
    </svg>
  </button>

  <div id="mobile-menu" class="hidden sm:hidden">
    <div class="pt-2 pb-3 space-y-1">
      {categories.map((category) => (
        <a
          href={`/category/${category.slug}`}
          class="block pl-3 pr-4 py-2 text-base font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50"
        >
          {category.name}
        </a>
      ))}
    </div>
  </div>
</div>

<script>
  const button = document.querySelector('.mobile-menu-button');
  const menu = document.getElementById('mobile-menu');

  button?.addEventListener('click', () => {
    const expanded = button.getAttribute('aria-expanded') === 'true';
    button.setAttribute('aria-expanded', (!expanded).toString());
    menu?.classList.toggle('hidden');
  });
</script>